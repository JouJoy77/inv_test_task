# Тестовое задание
------------------------

Описание компонентов системы
Sensor
Компонент, генерирующий данные, на основе которых контроллер
принимает решение. Всего 8 сенсоров, каждый генерирует 300
сообщений в секунду, сообщения равномерно распределены по
секунде и отправляются раздельно (один запрос на одно
сообщение). Алгоритм генерации данных на усмотрение.
Controller
Компонент, который по TCP соединению управляет манипулятором,
на базе данных от сенсоров. Алгоритм принятия решения о статусе
на усмотрение, но должен использовать данные с сенсоров.
2
API контроллера должен соответствовать REST API.
Обработка данных с сенсоров происходит параллельно/асинхронно,
однако важно обрабатывать сообщения в интервалы 5 секунд. Т. е.
каждые 5 секунд принимается решение об управляющем сигнале для
манипулятора.
Outdated информация не должна приниматься во внимание при
принятии решения. Сообщение считается outdated, если информация
из этого сообщения имеет время создания раньше принятия
последнего решения об управляющем сигнале.
Контроллер должен уметь через API отдавать список отправленных
управляющих сигналов за указанный интервал времени.
Manupulator
Компонент, который принимает сигналы по TCP соединению и
выводит их в консоль/логи для демонстрации.
Формат сообщений
Sensor → Controller
{
 "datetime": "%Y-%m-%dT%H:%M:%S",
 "payload": int
}
Controller → Manipulator
{
 "datetime": "%Y-%m-%dT%H:%M:%S",
 "status": "up" | "down"
}
Для демонстрации необходимо выводить изменение статуса
контроллера как в логи контроллера, так и на веб сервере.
Условие для изменения статуса задать произвольное.
3
–
–
–
–
Результат
docker-compose конфигурация
исходный код системы - основной код на Python 3,
допускается использование любых библиотек/фреймворков/
инструментов
документация по запуску системы (например, README.md)
репозиторий в GitHub с результатами предыдущих пунктов
Наличие CI и тестов приветствуется, но не является
обязательным.


# Запуск системы:
----------------------------
1. Скачать проект себе на локальный компьютер
2. Из корневой папки invian открыть терминал и запустить команду docker-compose up --build


# TODO:
1. Добавить тесты. По времени не успел
2. На данный момент система реализована таким образом, что не может обработать 2400 сообщений в секунду.
Способ исправить это, к сожалению, я не смог найти. Однако, она вполне справляется с меньшим количеством.
Требуется исправить это.
Возможные варианты решения:
    - кешировать сообщения от сенсоров
    - использовать более быструю бд
    - использовать NoSQL бд
    - запуск на другом сервере
    - полностью другой подход, до которого я возможно не додумался
    - использовать более быструю машину (вполне вероятно, мой ПК просто не успевает)
3. Использовать poetry для управления зависимостями
4. Я провел рефакторинг и разбил по файлам controller для демонстрации. Тоже самое можно сделать в других сервисах
